<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√îNG TY TH·ª¶Y ƒêI·ªÜN BU√îN KU·ªêP CHECKIN 4.0</title>
    <link rel="stylesheet" href="/css/dashboard.css">
    
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="layout">
        <aside class="sidebar">
            <div class="brand">CHECKIN 4.0</div>
            <nav class="menu">
                <button class="menu-item active" data-tab="dashboard">Dashboard</button>
                <button class="menu-item" data-tab="devices">Thi·∫øt b·ªã</button>
                <button class="menu-item" data-tab="activity">Ho·∫°t ƒë·ªông</button>
                <button class="menu-item" data-tab="reports">B√°o c√°o</button>
                <button class="menu-item" data-tab="faceid">FACEID</button>
            </nav>
        </aside>
        <main class="main">
            <header class="page-header">
        <h1>C√îNG TY TH·ª¶Y ƒêI·ªÜN BU√îN KU·ªêP</h1>
            </header>

            <section id="tab-dashboard" class="tab-panel active">
                <div class="tab-header">
                    <h2>Dashboard</h2>
                    <button class="btn-refresh" onclick="refreshDashboardData()">üîÑ L√†m m·ªõi</button>
                </div>
                <div class="kpis">
                    <div class="kpi-card accent-1">
                        <div class="kpi-title">T·ªïng b·∫£n ghi</div>
                        <div class="kpi-value" id="kpi-total">0</div>
                    </div>
                    <div class="kpi-card accent-2">
                        <div class="kpi-title">ƒê√∫ng gi·ªù</div>
                        <div class="kpi-value" id="kpi-on-time">0</div>
                    </div>
                    <div class="kpi-card accent-3">
                        <div class="kpi-title">ƒêi tr·ªÖ</div>
                        <div class="kpi-value" id="kpi-late">0</div>
                    </div>
                    <div class="kpi-card accent-4">
                        <div class="kpi-title">V·ªÅ s·ªõm</div>
                        <div class="kpi-value" id="kpi-early">0</div>
                    </div>
                    <div class="kpi-card accent-5">
                        <div class="kpi-title">Ph√≤ng ban</div>
                        <div class="kpi-value" id="kpi-departments">0</div>
                    </div>
                    <div class="kpi-card accent-6">
                        <div class="kpi-title">Nh√¢n s·ª±</div>
                        <div class="kpi-value" id="kpi-people">0</div>
                    </div>
                </div>
                <div class="dash-viz">
                    <div class="viz-card">
                        <div class="viz-title">H√¥m nay</div>
                        <div class="today-cards">
                            <div class="today-card">
                                <div class="today-label">ƒê√∫ng gi·ªù</div>
                                <div class="today-value" id="today-on-time">0</div>
                            </div>
                            <div class="today-card">
                                <div class="today-label">ƒêi tr·ªÖ</div>
                                <div class="today-value" id="today-late">0</div>
                            </div>
                            <div class="today-card">
                                <div class="today-label">V·ªÅ s·ªõm</div>
                                <div class="today-value" id="today-early">0</div>
                            </div>
                            <div class="today-card">
                                <div class="today-label">T·ªïng l∆∞·ª£t</div>
                                <div class="today-value" id="today-total">0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tab-devices" class="tab-panel">
                <div class="devices-header">
                    <h2>Danh s√°ch thi·∫øt b·ªã</h2>
                    <div class="devices-controls">
                        <div class="filter-group">
                            <label for="status-filter">L·ªçc theo tr·∫°ng th√°i:</label>
                            <select id="status-filter" onchange="filterDevices()">
                                <option value="all">T·∫•t c·∫£</option>
                                <option value="online">Online</option>
                                <option value="offline">Offline</option>
                            </select>
                        </div>
                        <button class="btn-refresh" onclick="refreshDevices()" title="L√†m m·ªõi d·ªØ li·ªáu">
                            üîÑ L√†m m·ªõi
                        </button>
                    </div>
                </div>
                
                <div class="devices-stats">
                    <div class="stat-card online">
                        <div class="stat-number" id="online-count">0</div>
                        <div class="stat-label">Online</div>
                    </div>
                    <div class="stat-card offline">
                        <div class="stat-number" id="offline-count">0</div>
                        <div class="stat-label">Offline</div>
                    </div>
                    <div class="stat-card total">
                        <div class="stat-number" id="total-count">0</div>
                        <div class="stat-label">T·ªïng c·ªông</div>
                    </div>
                </div>
                
                <div class="filter-info" id="filter-info">
                    Hi·ªÉn th·ªã t·∫•t c·∫£ thi·∫øt b·ªã
                </div>
                
                <div id="devices-container" class="devices-grid">
                    <div class="loading">ƒêang t·∫£i danh s√°ch thi·∫øt b·ªã...</div>
                </div>
            </section>

            <section id="tab-activity" class="tab-panel">
                <div class="activity-header">
                    <h2>Ho·∫°t ƒë·ªông ch·∫•m c√¥ng</h2>
                    <button class="btn-refresh" onclick="refreshActivityData()" title="L√†m m·ªõi d·ªØ li·ªáu">
                        üîÑ L√†m m·ªõi
                    </button>
                </div>
                
                <div class="filters">
                    <div>
                        <label for="act-start">T·ª´ ng√†y:</label>
                        <input type="date" id="act-start">
                    </div>
                    <div>
                        <label for="act-end">ƒê·∫øn ng√†y:</label>
                        <input type="date" id="act-end">
                    </div>
                    <div>
                        <label for="act-person">M√£ NV:</label>
                        <input type="text" id="act-person" placeholder="VD: 300029">
                    </div>
                    <div>
                        <label for="act-status">Tr·∫°ng th√°i:</label>
                        <select id="act-status">
                            <option value="">-- T·∫•t c·∫£ --</option>
                            <option value="ƒê√∫ng gi·ªù">ƒê√∫ng gi·ªù</option>
                            <option value="Kh√¥ng ƒë√∫ng gi·ªù quy ƒë·ªãnh">Kh√¥ng ƒë√∫ng gi·ªù quy ƒë·ªãnh</option>
                        </select>
                    </div>
                    <button type="button" onclick="loadActivityAttendance()">L·ªçc</button>
                </div>
        <table>
            <thead>
                <tr>
                    <th>M√£ Nh√¢n Vi√™n</th>
                    <th>H·ªç v√† T√™n</th>
                    <th>Ng√†y c√¥ng</th>
                    <th>Ng√†y v√†o</th>
                    <th>Ng√†y ra</th>
                    <th>Gi·ªù v√†o</th>
                    <th>Gi·ªù ra</th>
                    <th>Th·ªùi gian l√†m vi·ªác (gi·ªù)</th>
                    <th>Tr·∫°ng th√°i</th>
                </tr>
            </thead>
                    <tbody id="activity-attendance-data"></tbody>
        </table>

                <div class="filters" style="margin-top:16px;">
                    <div>
                        <label for="act-month">Th√°ng:</label>
                        <input type="month" id="act-month">
                    </div>
                    <button type="button" onclick="loadMonthlySummary()">T·ªïng h·ª£p theo th√°ng</button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>M√£ Nh√¢n Vi√™n</th>
                            <th>H·ªç v√† T√™n</th>
                            <th>Th√°ng</th>
                            <th>S·ªë c√¥ng (ƒê√∫ng gi·ªù)</th>
                        </tr>
                    </thead>
                    <tbody id="activity-monthly-data"></tbody>
                </table>
            </section>

            <section id="tab-faceid" class="tab-panel">
                <div class="subtabs">
                    <button class="subtab-btn active" data-subtab="faceid-home">FACEID</button>
                    <button class="subtab-btn" data-subtab="faceid-departments">Ph√≤ng ban</button>
    </div>

                <div id="faceid-home" class="subtab-panel active">
                    <p>FACEID: n·ªôi dung s·∫Ω c·∫≠p nh·∫≠t sau.</p>
                </div>
                <div id="faceid-departments" class="subtab-panel">
                    <div class="filters">
                        <button type="button" onclick="loadFaceIdDepartments()">T·∫£i danh s√°ch ph√≤ng ban</button>
                    </div>
                    <ul id="faceid-dept-list"></ul>
                </div>
                
            </section>

            <section id="tab-reports" class="tab-panel">
                <div class="reports-header">
                    <h2>B√°o c√°o ch·∫•m c√¥ng</h2>
                    <button class="btn-refresh" onclick="refreshReportsData()" title="L√†m m·ªõi d·ªØ li·ªáu">
                        üîÑ L√†m m·ªõi
                    </button>
                </div>

                <div class="reports-tabs">
                    <button class="report-tab-btn active" data-report="summary">T·ªïng h·ª£p</button>
                    <button class="report-tab-btn" data-report="byname">Theo t√™n</button>
                    <button class="report-tab-btn" data-report="byid">Theo m√£ NV</button>
                    <button class="report-tab-btn" data-report="bydepartment">Theo ph√≤ng ban</button>
                    <button class="report-tab-btn" data-report="bymonth">Theo th√°ng</button>
                </div>

                <!-- B√°o c√°o t·ªïng h·ª£p -->
                <div id="report-summary" class="report-panel active">
                    <div class="report-controls">
                        <div class="control-group">
                            <label for="summary-start">T·ª´ ng√†y:</label>
                            <input type="date" id="summary-start">
                        </div>
                        <div class="control-group">
                            <label for="summary-end">ƒê·∫øn ng√†y:</label>
                            <input type="date" id="summary-end">
                        </div>
                        <div class="control-group">
                            <label for="summary-department">Ph√≤ng ban:</label>
                            <select id="summary-department">
                                <option value="">-- T·∫•t c·∫£ --</option>
                            </select>
                        </div>
                        <button class="btn-generate" onclick="generateSummaryReport()">T·∫°o b√°o c√°o</button>
                        <button class="btn-export" onclick="exportSummaryReport()">üìä Xu·∫•t Excel</button>
                    </div>
                    <div id="summary-results" class="report-results">
                        <div class="no-data">Ch·ªçn kho·∫£ng th·ªùi gian v√† nh·∫•n "T·∫°o b√°o c√°o" ƒë·ªÉ xem d·ªØ li·ªáu</div>
                    </div>
                </div>

                <!-- B√°o c√°o theo t√™n -->
                <div id="report-byname" class="report-panel">
                    <div class="report-controls">
                        <div class="control-group">
                            <label for="name-start">T·ª´ ng√†y:</label>
                            <input type="date" id="name-start">
                        </div>
                        <div class="control-group">
                            <label for="name-end">ƒê·∫øn ng√†y:</label>
                            <input type="date" id="name-end">
                        </div>
                        <div class="control-group">
                            <label for="name-search">T√¨m theo t√™n:</label>
                            <input type="text" id="name-search" placeholder="Nh·∫≠p t√™n nh√¢n vi√™n...">
                        </div>
                        <button class="btn-generate" onclick="generateNameReport()">T·∫°o b√°o c√°o</button>
                        <button class="btn-export" onclick="exportNameReport()">üìä Xu·∫•t Excel</button>
                    </div>
                    <div id="name-results" class="report-results">
                        <div class="no-data">Ch·ªçn kho·∫£ng th·ªùi gian v√† nh·∫•n "T·∫°o b√°o c√°o" ƒë·ªÉ xem d·ªØ li·ªáu</div>
                    </div>
                </div>

                <!-- B√°o c√°o theo m√£ NV -->
                <div id="report-byid" class="report-panel">
                    <div class="report-controls">
                        <div class="control-group">
                            <label for="id-start">T·ª´ ng√†y:</label>
                            <input type="date" id="id-start">
                        </div>
                        <div class="control-group">
                            <label for="id-end">ƒê·∫øn ng√†y:</label>
                            <input type="date" id="id-end">
                        </div>
                        <div class="control-group">
                            <label for="id-search">M√£ nh√¢n vi√™n:</label>
                            <input type="text" id="id-search" placeholder="VD: 300029">
                        </div>
                        <button class="btn-generate" onclick="generateIdReport()">T·∫°o b√°o c√°o</button>
                        <button class="btn-export" onclick="exportIdReport()">üìä Xu·∫•t Excel</button>
                    </div>
                    <div id="id-results" class="report-results">
                        <div class="no-data">Ch·ªçn kho·∫£ng th·ªùi gian v√† nh·∫•n "T·∫°o b√°o c√°o" ƒë·ªÉ xem d·ªØ li·ªáu</div>
                    </div>
                </div>

                <!-- B√°o c√°o theo ph√≤ng ban -->
                <div id="report-bydepartment" class="report-panel">
                    <div class="report-controls">
                        <div class="control-group">
                            <label for="dept-start">T·ª´ ng√†y:</label>
                            <input type="date" id="dept-start">
                        </div>
                        <div class="control-group">
                            <label for="dept-end">ƒê·∫øn ng√†y:</label>
                            <input type="date" id="dept-end">
                        </div>
                        <div class="control-group">
                            <label for="dept-select">Ph√≤ng ban:</label>
                            <select id="dept-select">
                                <option value="">-- Ch·ªçn ph√≤ng ban --</option>
                            </select>
                        </div>
                        <button class="btn-generate" onclick="generateDepartmentReport()">T·∫°o b√°o c√°o</button>
                        <button class="btn-export" onclick="exportDepartmentReport()">üìä Xu·∫•t Excel</button>
                    </div>
                    <div id="dept-results" class="report-results">
                        <div class="no-data">Ch·ªçn kho·∫£ng th·ªùi gian v√† nh·∫•n "T·∫°o b√°o c√°o" ƒë·ªÉ xem d·ªØ li·ªáu</div>
                    </div>
                </div>

                <!-- B√°o c√°o theo th√°ng -->
                <div id="report-bymonth" class="report-panel">
                    <div class="report-controls">
                        <div class="control-group">
                            <label for="month-select">Th√°ng:</label>
                            <input type="month" id="month-select">
                        </div>
                        <div class="control-group">
                            <label for="month-department">Ph√≤ng ban:</label>
                            <select id="month-department">
                                <option value="">-- T·∫•t c·∫£ --</option>
                            </select>
                        </div>
                        <button class="btn-generate" onclick="generateMonthReport()">T·∫°o b√°o c√°o</button>
                        <button class="btn-export" onclick="exportMonthReport()">üìä Xu·∫•t Excel</button>
                    </div>
                    <div id="month-results" class="report-results">
                        <div class="no-data">Ch·ªçn th√°ng v√† nh·∫•n "T·∫°o b√°o c√°o" ƒë·ªÉ xem d·ªØ li·ªáu</div>
                    </div>
                </div>
            </section>

    <script src="/js/api.js"></script>
    <script src="/js/dom.js"></script>
    <script src="/js/export.js"></script>
    <script src="/js/main.js"></script>
</body>
</html>